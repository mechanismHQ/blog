<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Mechanism Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Mechanism Blog Atom Feed"><title data-rh="true">PoXL ideas: Proportional mining rewards | Mechanism Blog</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://blog.mechanism.so/img/og_image.png?a=1"><meta data-rh="true" name="twitter:image" content="https://blog.mechanism.so/img/og_image.png?a=1"><meta data-rh="true" property="og:url" content="https://blog.mechanism.so/poxl-proportional-mining-rewards"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="PoXL ideas: Proportional mining rewards | Mechanism Blog"><meta data-rh="true" name="description" content="In this post, I’d like to make the case for changing how mining rewards in CityCoins (or any PoXL project) are distributed. Currently, mining is a “winner takes all” model. Instead, I’m advocating for proportional mining rewards."><meta data-rh="true" property="og:description" content="In this post, I’d like to make the case for changing how mining rewards in CityCoins (or any PoXL project) are distributed. Currently, mining is a “winner takes all” model. Instead, I’m advocating for proportional mining rewards."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2022-03-15T00:00:00.000Z"><meta data-rh="true" property="article:tag" content="CityCoins,PoXL,Tokenomics"><link data-rh="true" rel="icon" href="/img/mechanism-profile.png"><link data-rh="true" rel="canonical" href="https://blog.mechanism.so/poxl-proportional-mining-rewards"><link data-rh="true" rel="alternate" href="https://blog.mechanism.so/poxl-proportional-mining-rewards" hreflang="en"><link data-rh="true" rel="alternate" href="https://blog.mechanism.so/poxl-proportional-mining-rewards" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.4d2ffaf7.css">
<link rel="preload" href="/assets/js/runtime~main.d3fa909d.js" as="script">
<link rel="preload" href="/assets/js/main.4c972076.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/mechanism-profile.png" alt="Mechanism Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/mechanism-profile.png" alt="Mechanism Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Mechanism Blog</b></a></div><div class="navbar__items navbar__items--right"></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_a9qW thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_uKok margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Kvuv"><li class="sidebarItem_CF0Q"><a aria-current="page" class="sidebarItemLink_miNk sidebarItemLinkActive_RRTD" href="/poxl-proportional-mining-rewards">PoXL ideas: Proportional mining rewards</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/clarity-2-functions">New Clarity functions coming in Stacks 2.1</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_rzP5" itemprop="headline">PoXL ideas: Proportional mining rewards</h1><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-03-15T00:00:00.000Z" itemprop="datePublished">March 15, 2022</time></div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><span class="avatar__photo-link avatar__photo"><img class="image_xS9F" src="https://github.com/hstove.png" alt="Hank Stoever"></span><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">Hank Stoever</span></div><small class="avatar__subtitle" itemprop="description"><a href="https://twitter.com/@heynky" target="_blank" rel="noopener noreferrer">@heynky</a></small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p>In this post, I’d like to make the case for changing how mining rewards in CityCoins (or any PoXL project) are distributed. Currently, mining is a “winner takes all” model. Instead, I’m advocating for <strong>proportional mining rewards</strong>.</p><p>The core thesis behind this change is:</p><ul><li>Proportional rewards will increase miner participation</li><li>Increasing miner participation is good for a PoXL project</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="poxl-vs-pox">PoXL vs PoX<a class="hash-link" href="#poxl-vs-pox" title="Direct link to heading">​</a></h2><p>CityCoin’s mining mechanism, Proof-of-Transfer-Lite (PoXL), is an almost direct port of the Stacks Proof-of-Transfer (PoX) mining mechanism. This has many benefits, but PoX is designed around certain goals that CityCoins do not have. The “winner takes all” mining reward is one such example that is needed in PoX, but isn’t required in PoXL.</p><p>Stacks mining requires a &quot;leader election&quot; consensus mechanism. The winning miner is responsible for forming an anchor blocks, as well as for proposing a microblock stream in between anchor blocks. CityCoins does not have any requirements for leader election, so there isn’t a need to have a “winning miner”.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="the-difficulty-of-profitable-mining">The difficulty of profitable mining<a class="hash-link" href="#the-difficulty-of-profitable-mining" title="Direct link to heading">​</a></h2><p>When CityCoins miners participate in mining, many are likely doing so in order to accumulate a project&#x27;s tokens at a better price than they could receive on the open market.</p><p>One simple way to calculate mining profitability is to think of it in expected value (EV) terms. If I commit some amount of STX to mine a block, what is the expected value?</p><p>PoXL mining is designed such that your probability of winning a block is equal to the proportion of funds you&#x27;ve committed to that block.</p><p>As an example:</p><ul><li>There are 900 STX committed from miners already</li><li>The block reward is worth 2000 STX. In CityCoins projects, the block reward is not in STX, but it can be valued in STX.</li><li>Alice commits 100 STX, bringing the total miner commit to 1000 STX</li></ul><p>In this example, Alice has a 10% chance of winning the block (because she committed 100 out of 1000 STX). The expected value for Alice is then:</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#F8F8F2"><span class="token plain">0.1 * 2000 + 0.9 * 0 = 200 STX</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>According to the EV calculation, Alice&#x27;s expected value is 200 STX - double what she put in! Most of the time, you want to make an EV bet that 2x&#x27;s your bid.</p><p>In reality, Alice will lose 100 STX and get nothing in return 9 times out of 10. In order to have a higher confidence that she&#x27;ll make money from mining, Alice will need to mine many blocks. So, how many times would Alice need to mine to have a high probability of being +EV?</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="cumulative-binomial-distributions">Cumulative binomial distributions<a class="hash-link" href="#cumulative-binomial-distributions" title="Direct link to heading">​</a></h3><p>PoXL mining is <a href="https://en.wikipedia.org/wiki/Binomial_distribution" target="_blank" rel="noopener noreferrer">binomial</a> - you either win the block or you lose it. Using statistics, we can evaluate this as a <a href="https://en.wikipedia.org/wiki/Cumulative_distribution_function" target="_blank" rel="noopener noreferrer">cumulative distribution function</a> to calculate how often a miner will end up profitable if they mine for a certain number of blocks. Now that the fancy words are out of the way, we&#x27;ll explain what this means.</p><p>We&#x27;ve created a <a href="https://docs.google.com/spreadsheets/d/15ipYxuiMKBAUtat-ojwIS6xM1RoGda6lkpYRpq6QV2g/edit?usp=sharing" target="_blank" rel="noopener noreferrer">Google sheet</a> that does this math for you. It&#x27;s pre-populated with a few real-world variables from recently mined MIA blocks.</p><p>In our calculator, we assume that a miner has a specific amount of STX that they want to spend to mine CityCoins. With that condition, we can evaluate how likely the miner is profitable if they commit <em>x</em> amount of STX to mining each block.</p><p>The more STX a miner commits, the higher their chance of winning the block. However, when they spend more STX, they&#x27;re not able to mine for as many blocks. Additionally, the more STX committed each block, the higher the <em>total</em> miner commitment is, meaning that miner profitability is lower.</p><p>With these factors in mind, we can determine that <strong>the best strategy for PoXL mining is to mine for many block with as few STX per block as possible.</strong> The only downside to this strategy is that it will take a while to mine, meaning you&#x27;ll have less time receiving Stacking rewards, and you&#x27;ll have to spend more on transaction fees.</p><p><img loading="lazy" alt="Profitability probability vs. spend" src="/assets/images/+Profit probability vs. STX spent-d2b369270d465b05c9819c98bd31d963.png" width="554" height="343"></p><p>As we can see, there quickly becomes a point where your probability of ending of with profit from mining becomes less than 50%.</p><p>We can also demonstrate the need to mine for many blocks in order to end up profitable. To visualize this, we can set up a scenario with fixed variables and see how likely it is for a miner to be profitable based on the number of blocks they mined.</p><p>In this chart, the miner has a 5% chance of winning, and the miner discount is 11%. Because of this discount, the expected value of mining is +11%. However, actually making a profit depends on the number of blocks they mine.</p><p><img loading="lazy" alt="profit vs blocks mined" src="/assets/images/+Profit probability vs. Blocks mined-159154cbc9319fb364e0b47e32de9f32.png" width="600" height="371"></p><p>As you can see, you need to mine for thousands of blocks in order to be confident that you’ll make any profit at all, even with a high discount.</p><p>All of this is to show that <strong>profitably mining in PoXL is hard and unlikely</strong>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="proportionally-distributed-mining-rewards">Proportionally distributed mining rewards<a class="hash-link" href="#proportionally-distributed-mining-rewards" title="Direct link to heading">​</a></h2><p>Now that we&#x27;ve outlined the challenges behind &quot;winner takes all&quot; mining, we can look at an alternative - sharing mining rewards proportionally amongst all miners.</p><p>In this model, a miner who commits 10% of the total mining commitment would receive 10% of the total mining rewards for that block.</p><p>The best aspect of this alternative is that <strong>it makes profitable mining much easier</strong>. Remember our previous example? The expected value of Alice&#x27;s mining action was a 2x return, but in reality she&#x27;d lose her whole commitment 90% of the time. In this model, Alice will make her 2x return every single time.</p><p>By making profitable mining much more likely, our hypothesis is that this will lead to greater involvement in mining. Rational miners will commit to mining as much as possible, up until the point where the total miner commitment is equal to the block reward. In reality, there will likely still be some &quot;miner discount&quot; to account for transaction fees and price variability risk. However, we believe that the net discount will end up being lower in this scheme.</p><p>To support the argument that miners are more likely to continue mining as the miner discount gets smaller, we can evaluate a miner&#x27;s chance of being profitable under these conditions.</p><p>In the following chart, we evaluate a scenario where a miner is going to mine 10 STX for 500 blocks. Using the same math as before, we can look at the chance that a miner is profitable as the discount approaches zero.</p><p><img loading="lazy" alt="Profit vs discount" src="/assets/images/+Profit probability vs. Discount-489cfd3f3a15df7d4c835ae8faf31310.png" width="600" height="371"></p><p>As you can see, once the discount is below 10%, this miner can expect to lose money more than 50% of the time. A rational miner should either not mine, or they should commit to mining for many more blocks.</p><p>Compare this to proportional mining rewards - <strong>this miner will always be profitable as long as the discount is below zero!</strong></p><hr><p>We hope that this post sheds light on a mechanism change to PoXL and CityCoins that aims to increase miner participation. When more STX are committed to mining, that leads to more Stacking rewards and more funds raised for a City. Ultimately, we hope that these kinds of incremental improvements can help CityCoins and other DAOs to achieve overall success.</p></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_h6_j"><div class="col"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/city-coins">CityCoins</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/po-xl">PoXL</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/tags/tokenomics">Tokenomics</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/clarity-2-functions"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">New Clarity functions coming in Stacks 2.1</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_cNA8 thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#poxl-vs-pox" class="table-of-contents__link toc-highlight">PoXL vs PoX</a></li><li><a href="#the-difficulty-of-profitable-mining" class="table-of-contents__link toc-highlight">The difficulty of profitable mining</a><ul><li><a href="#cumulative-binomial-distributions" class="table-of-contents__link toc-highlight">Cumulative binomial distributions</a></li></ul></li><li><a href="#proportionally-distributed-mining-rewards" class="table-of-contents__link toc-highlight">Proportionally distributed mining rewards</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items"><li class="footer__item"><a href="https://mechanism.so" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Mechanism<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://mechanism.breezy.hr" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Careers<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/mechanismHQ" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Mechanism.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d3fa909d.js"></script>
<script src="/assets/js/main.4c972076.js"></script>
</body>
</html>